{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/extdisk/WORK/audittrial/backend/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6HAAA,CAAA,eAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/extdisk/WORK/audittrial/backend/src/app/api/documents/%5Bid%5D/digitize/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { GoogleGenerativeAI } from '@google/generative-ai'\nimport { readFile } from 'fs/promises'\nimport { existsSync } from 'fs'\nimport { join } from 'path'\nimport { prisma } from '@/lib/prisma'\n\n// Initialize Gemini AI\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '')\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const { searchParams } = new URL(request.url)\n    const userId = searchParams.get('userId')\n\n    if (!userId) {\n      return NextResponse.json({ error: 'User ID is required' }, { \n        status: 400,\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000',\n        },\n      })\n    }\n\n    // Find the document\n    const document = await prisma.document.findFirst({\n      where: {\n        id,\n        userId,\n      },\n    })\n\n    if (!document) {\n      return NextResponse.json({ error: 'Document not found' }, { \n        status: 404,\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000',\n        },\n      })\n    }\n\n    if (document.status === 'DIGITIZED') {\n      return NextResponse.json({ error: 'Document already digitized' }, { \n        status: 400,\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000',\n        },\n      })\n    }\n\n    // Update status to processing\n    await prisma.document.update({\n      where: { id },\n      data: { status: 'PROCESSING' },\n    })\n\n    try {\n      // Check if file exists\n      const fullPath = join(process.cwd(), document.filePath)\n      if (!existsSync(fullPath)) {\n        throw new Error('File not found on disk')\n      }\n\n      // Read file for processing\n      const fileBuffer = await readFile(fullPath)\n      const base64Data = fileBuffer.toString('base64')\n\n      // Process with Gemini AI (mock implementation)\n      const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' })\n      \n      const prompt = `\n        Analyze this receipt/invoice image and extract ALL the following information in JSON format:\n        {\n          \"purchaseDate\": \"YYYY-MM-DD format (Purchase Date)\",\n          \"vendorName\": \"vendor/business name\",\n          \"vendorAbn\": \"Australian Business Number if present\",\n          \"vendorAddress\": \"complete vendor address\",\n          \"documentType\": \"receipt or invoice\",\n          \"receiptNumber\": \"receipt or invoice number\",\n          \"paymentType\": \"cash, card, eftpos, credit, etc\",\n          \"amountExclTax\": \"amount excluding tax as number\",\n          \"taxAmount\": \"GST/tax amount as number\",\n          \"totalAmount\": \"total amount including tax as number\",\n          \"expenseCategory\": \"category like office supplies, meals, transport, etc\",\n          \"taxStatus\": \"taxable, tax-free, or mixed\"\n        }\n        \n        IMPORTANT: \n        - Return only valid JSON without any additional text\n        - If a field cannot be determined, use null\n        - Ensure all amounts are numbers, not strings\n        - Use Australian date format YYYY-MM-DD\n        - Be precise with expense categorization\n        - For vendorAbn: Extract ONLY DIGITS, remove all spaces, hyphens, and special characters. ABN should be 11 consecutive digits only (e.g., \"12345678901\" not \"12 345 678 901\" or \"12-345-678-901\")\n      `\n\n      console.log(`Starting AI digitization for document ${id}...`)\n      console.log(`Document type: ${document.mimeType}, size: ${document.fileSize} bytes`)\n      \n      // Retry mechanism for handling API overload\n      let result\n      let lastError\n      const maxRetries = 3\n      const baseDelay = 2000 // 2 seconds\n      \n      for (let attempt = 1; attempt <= maxRetries; attempt++) {\n        try {\n          console.log(`Attempt ${attempt}/${maxRetries} to call Gemini API...`)\n          \n          result = await model.generateContent([\n            {\n              inlineData: {\n                mimeType: document.mimeType,\n                data: base64Data,\n              },\n            },\n            { text: prompt },\n          ])\n          \n          console.log(`‚úÖ Gemini API call successful on attempt ${attempt}`)\n          break // Success, exit retry loop\n          \n        } catch (apiError) {\n          lastError = apiError\n          console.log(`‚ùå Attempt ${attempt} failed:`, apiError.message)\n          \n          // Check if it's a retryable error (503 Service Unavailable)\n          const isRetryable = apiError.message.includes('503') || \n                             apiError.message.includes('overloaded') ||\n                             apiError.message.includes('Service Unavailable')\n          \n          if (!isRetryable || attempt === maxRetries) {\n            console.log(`Non-retryable error or max retries reached. Throwing error.`)\n            throw apiError\n          }\n          \n          // Calculate exponential backoff delay\n          const delay = baseDelay * Math.pow(2, attempt - 1) + Math.random() * 1000\n          console.log(`‚è≥ Waiting ${Math.round(delay)}ms before retry...`)\n          \n          await new Promise(resolve => setTimeout(resolve, delay))\n        }\n      }\n\n      const response = await result.response\n      const text = response.text()\n      console.log(`AI response received for document ${id}:`, text.substring(0, 200) + '...')\n      \n      // Parse the JSON response\n      let receiptData\n      try {\n        receiptData = JSON.parse(text.replace(/```json|```/g, '').trim())\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', text)\n        receiptData = {\n          vendor: 'Unknown',\n          totalAmount: 0,\n          documentType: 'receipt',\n          error: 'Failed to parse receipt data'\n        }\n      }\n\n      // Get document data for creating digitized record\n      const documentWithRelations = await prisma.document.findUnique({\n        where: { id },\n        include: {\n          user: {\n            select: {\n              id: true,\n              name: true,\n              email: true,\n            },\n          },\n          company: {\n            select: {\n              id: true,\n              name: true,\n            },\n          },\n        },\n      })\n\n      if (!documentWithRelations) {\n        return NextResponse.json(\n          { error: 'Document not found' },\n          { status: 404 }\n        )\n      }\n\n      // Update document status only\n      const updatedDocument = await prisma.document.update({\n        where: { id },\n        data: {\n          status: 'DIGITIZED',\n          processedDate: new Date(),\n          // Legacy –ø–æ–ª—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏\n          vendor: receiptData.vendorName || receiptData.vendor || null,\n          abn: receiptData.vendorAbn || receiptData.abn || null,\n          transactionDate: receiptData.purchaseDate ? new Date(receiptData.purchaseDate) : (receiptData.transactionDate ? new Date(receiptData.transactionDate) : null),\n          gstAmount: receiptData.taxAmount ? parseFloat(receiptData.taxAmount.toString()) : (receiptData.gstAmount ? parseFloat(receiptData.gstAmount.toString()) : null),\n          paymentMethod: receiptData.paymentType || receiptData.paymentMethod || null,\n          description: receiptData.expenseCategory || receiptData.description || null,\n          receiptData: receiptData,\n        },\n      })\n\n      console.log(`Document ${id} digitized successfully:`, {\n        vendor: receiptData.vendorName || receiptData.vendor,\n        totalAmount: receiptData.totalAmount,\n        documentType: receiptData.documentType\n      })\n\n      // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Digitized\n      const digitizedDocument = await prisma.Digitized.create({\n        data: {\n          companyId: documentWithRelations.companyId,\n          userId: documentWithRelations.userId,\n          originalDocumentId: documentWithRelations.id,\n          fileName: documentWithRelations.fileName,\n          filePath: documentWithRelations.filePath,\n          fileSize: documentWithRelations.fileSize,\n          mimeType: documentWithRelations.mimeType,\n          purchaseDate: receiptData.purchaseDate ? new Date(receiptData.purchaseDate) : null,\n          vendorName: receiptData.vendorName || null,\n          vendorAbn: receiptData.vendorAbn || null,\n          vendorAddress: receiptData.vendorAddress || null,\n          documentType: receiptData.documentType || 'receipt',\n          receiptNumber: receiptData.receiptNumber || null,\n          paymentType: receiptData.paymentType || null,\n          amountExclTax: receiptData.amountExclTax ? parseFloat(receiptData.amountExclTax.toString()) : null,\n          taxAmount: receiptData.taxAmount ? parseFloat(receiptData.taxAmount.toString()) : null,\n          totalAmount: receiptData.totalAmount ? parseFloat(receiptData.totalAmount.toString()) : null,\n          expenseCategory: receiptData.expenseCategory || null,\n          taxStatus: receiptData.taxStatus || 'taxable',\n        },\n      })\n\n      console.log(`Document ${id} transferred to Digitized table with ID: ${digitizedDocument.id}`)\n\n      // –£–¥–∞–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Documents\n      await prisma.document.delete({\n        where: { id },\n      })\n\n      console.log(`Document ${id} removed from Documents queue`)\n\n      return NextResponse.json({\n        success: true,\n        digitizedDocument,\n        message: 'Document digitization completed successfully',\n      }, {\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000',\n        },\n      })\n    } catch (processingError) {\n      console.error(`Processing error for document ${id}:`, processingError)\n      console.error('Error details:', {\n        message: processingError.message,\n        status: processingError.status,\n        statusText: processingError.statusText,\n        stack: processingError.stack\n      })\n      \n      // Determine error type and appropriate response\n      let errorMessage = 'Failed to process document'\n      let shouldRetryLater = false\n      \n      if (processingError.message.includes('503') || processingError.message.includes('overloaded')) {\n        errorMessage = 'AI service is temporarily overloaded. Please try again in a few minutes.'\n        shouldRetryLater = true\n        console.log('üí° Recommendation: Gemini API is overloaded, user should retry later')\n      } else if (processingError.message.includes('403') || processingError.message.includes('PERMISSION_DENIED')) {\n        errorMessage = 'AI service authentication failed. Please contact support.'\n        console.log('üí° Recommendation: Check Gemini API key configuration')\n      } else if (processingError.message.includes('400')) {\n        errorMessage = 'Document format not supported or corrupted.'\n        console.log('üí° Recommendation: Check document format and size')\n      } else {\n        console.log('üí° Recommendation: Unknown error, check logs for details')\n      }\n      \n      // Update status to error\n      await prisma.document.update({\n        where: { id },\n        data: { \n          status: 'ERROR',\n          processedDate: new Date()\n        },\n      })\n      \n      console.log(`Document ${id} status updated to ERROR`)\n\n      return NextResponse.json(\n        { \n          error: errorMessage,\n          retryable: shouldRetryLater,\n          details: processingError.message\n        },\n        { \n          status: shouldRetryLater ? 503 : 500,\n          headers: {\n            'Access-Control-Allow-Origin': 'http://localhost:3000',\n          },\n        }\n      )\n    }\n  } catch (error) {\n    console.error('Digitize error:', error)\n    return NextResponse.json(\n      { error: 'Failed to digitize document' },\n      { \n        status: 500,\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000',\n        },\n      }\n    )\n  } finally {\n    await prisma.$disconnect()\n  }\n}\n\nexport async function OPTIONS() {\n  return NextResponse.json({}, {\n    headers: {\n      'Access-Control-Allow-Origin': 'http://localhost:3000',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  })\n}"],"names":[],"mappings":"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","debugId":null}}]
}